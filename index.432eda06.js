const e=document.querySelector("body")??document.appendChild(document.createElement("body"));e.style.padding="0",e.style.margin="0",e.style.overflow="hidden",e.style.userSelect="none",e.style.whiteSpace="nowrap";const t=document.createElement("div");t.style.position="absolute",e.appendChild(t);const n=[];window.mp.events.add("UI3DTextLabel:add",e=>{let{identifier:i,htmlContent:o,position:l}=JSON.parse(e);if(n.some(e=>e.identifier===i))return;let d=document.createElement("div");d.innerHTML=o,d.style.position="absolute",d.style.transform="translate(-50%, -50%)",t.appendChild(d),n.push({identifier:i,htmlContent:o,position:l,element:d})}),window.mp.events.add("UI3DTextLabel:remove",e=>{let t=n.findIndex(t=>t.identifier===e);-1!==t&&(n[t].element?.remove?.(),n.splice(t,1))}),window.mp.events.add("UI3DTextLabel:updateMore",e=>{let t=JSON.parse(e);t.map(e=>({...e,index:n.findIndex(t=>t.identifier===e.identifier)})).filter(e=>-1!==e.index).forEach(({parts:e,index:t})=>{e.forEach(([e,i])=>{switch(!0){case"position"===e&&"object"==typeof i:let{x:o,y:l}=i;n[t].element.style.left=`${o}px`,n[t].element.style.top=`${l}px`;break;case"htmlContent"===e&&"string"==typeof i:n[t].element.innerHTML=i}})}),console.log(`Updating ${t.length} labels`)});